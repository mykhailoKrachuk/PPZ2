<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Log In</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="page">
  <header class="topbar right">
    <nav>
      <a class="link-btn" href="index.html">Wyszukaj Przesyłkę</a>
    </nav>
  </header>

  <main class="panel">
    <h1 class="panel-title">Log In</h1>

    <form class="form-narrow centered" method="post" action="/backend/login.php" autocomplete="off">
      <label for="login" class="visually-hidden">Login</label>
      <input id="login" class="input" type="text" name="login" placeholder="Login" required>

      <label for="password" class="visually-hidden">Hasło</label>
      <input id="password" class="input" type="password" name="password" placeholder="Password" required>

      <button class="btn-primary" type="submit">Zaloguj się</button>
      <button class="btn-secondary" type="button" onclick="window.location.href='register.html'">Zarejestruj się</button>

      <div class="error" style="margin-top:8px;">
        <script>
          const map = {
            empty   : 'Podaj login i hasło.',
            badcreds: 'Nieprawidłowy login lub hasło.',
            auth    : 'Zaloguj się, aby kontynuować.'
          };
          const k = new URLSearchParams(location.search).get('err');
          if (map[k]) document.write('<p>'+map[k]+'</p>');
        </script>
      </div>
    </form>
  </main>

  <footer class="page-footer">
    <nav class="footer-nav">
      <a class="link-btn" href="about.html">O nas</a>
      <a class="link-btn" href="contact.html">Kontakt</a>
    </nav>
  </footer>
</div>

<script>
  const loginForm = document.getElementById('loginForm');
  loginForm.addEventListener('submit', function(e){
    e.preventDefault();
    const login = document.getElementById('login').value.trim();
    if(!login){ alert('Podaj login.'); return; }
    const role = document.getElementById('role').value;
    if(!role){ alert('Wybierz rolę.'); return; }

    if(role === 'Klient'){
      window.location.href = 'client.html';
      return;
    }
    if(role === 'Pracownik'){
      window.location.href = 'worker.html';
      return;
    }
    if(role === 'Dział dostaw'){
      window.location.href = 'delivery.html';
      return;
    }

    alert('Witaj, ' + login + ' (' + role + ')! (demo logowania)');
  });
</script>
</body>
</html>
